---
name: gd-data-builder
description: GD予想問題を、アプリ搭載用の3モードデータ（基礎知識カード・意見トレーニング・軸発見トレーニング）に変換するスキル。「GDデータ生成」「GDアプリのデータ作成」「テーマのデータを作って」「知識カード作成」「意見問題作成」「軸発見問題作成」など、GD対策アプリのコンテンツデータ作成が必要な場面で必ず使用する。予想問題生成スキル（gd-question-generator）で作ったテーマを入力として受け取る。
user_invocable: true
---

# /gd-data-builder — GD出題データ変換スキル

gd-question-generator で生成した GD テーマを、アプリに搭載する3モード分のデータに変換する。

---

## 対象アプリの概要

滋賀県立大学 工学部 材料化学科 後期GD試験対策アプリ。3つの出題モードがある：

1. **基礎知識カード**（FSRS復習）：テーマの背景知識を暗記カードで学ぶ
2. **意見トレーニング**：立場を選んで意見構築 → AI添削 → 反論3問に切り返し
3. **軸発見トレーニング**：4人の意見を「軸」で2グループに分ける練習

---

## Hard Gates（前提条件）

- 入力は必ず **gd-question-generator のテーマデータ**（`~/claude-plugins/gd-question-generator/data/gd-themes.ts`）
- 型定義は **`~/claude-plugins/gd-question-generator/data/types.ts`** に準拠する
- 温度感は **「高校の化学の先生がHRで雑談するレベル」** に固定する。これが最重要制約
- 出力は既存サンプルデータと同じ構造・品質にする

---

## 温度感ガイドライン（最重要・必ず守る）

### 対象は高校3年生（受験生）

- 知識レベル：高校化学の教科書＋日常生活の常識
- 専門用語：教科書に出てくるものはOK。大学以上の用語は使わない
- 数値データ：「約〇〇」レベルの概数でOK。有効数字は気にしない
- 企業名・製品名：高校生が知っていそうなもの（トヨタ、iPhone等）はOK

### 具体的な温度チェック

| ⭕ OK | ❌ NG |
|-------|------|
| 水の電気分解で水素を作る | 固体酸化物電解セル(SOEC)の電解質にYSZを用いる |
| 水素は軽すぎて運びにくい | 水素のH原子が金属格子間に侵入し内部応力で脆性破壊 |
| リチウムイオン電池はスマホやEVに使われる | LiCoO₂正極材のCo資源の地政学的リスク |
| プラスチックは石油から作る | PETの縮合重合におけるエステル結合の加水分解 |
| 白金は高い（1g約4000円） | 白金の4d電子軌道がH₂の解離吸着を促進する |

**迷ったら「高校の化学の先生がHRで雑談するレベル」に合わせる。**

---

## 型定義の参照先

すべての型は `~/claude-plugins/gd-question-generator/data/types.ts` に定義済み：

- `GDTheme` — テーマ情報
- `KnowledgeCard` — 基礎知識カード
- `OpinionProblem` — 意見トレーニング
- `AxisProblem` — 軸発見トレーニング

生成時は必ずこのファイルを読み込み、型に準拠したデータを出力すること。

---

## モード1：基礎知識カード

### カードタイプ別の作り方

#### daily_impact（身近な影響・用途）

「なくなったらどうなる？」で日常生活への影響を具体的に書く。

```
front: 「Siが枯渇したら何が困る？」
back: 「半導体が作れなくなり、スマホ・PC・自動車の電子制御がすべて止まる。
       さらにガラスも作れなくなる（SiO₂が主成分）ので窓もビンもなくなる」
```

#### number（数値データ）

GDで「実は〇〇なんです」と言える印象的な数値を書く。

```
front: 「鉄の年間世界生産量は？」
back: 「約19億トン。全金属の約95%を占める。2位のアルミニウムは約7000万トン」
```

#### product（製品・企業・実例）

高校生が知っている製品・人名で親近感を持たせる。

```
front: 「リチウムイオン電池を使っている身近な製品は？」
back: 「スマホ、ノートPC、EV（テスラ、日産リーフ等）、
       モバイルバッテリー、電動アシスト自転車。
       2019年にリチウムイオン電池の開発で吉野彰氏がノーベル化学賞受賞」
```

#### comparison（比較）

「実はそう単純じゃない」というGDで使える視点を提供する。

```
front: 「生分解性プラスチック vs 通常プラスチック、何が違う？」
back: 「生分解性：微生物が分解可能。ただし堆肥化施設（高温・高湿）でないと分解しない。
       海でそのまま消えるわけではない。
       通常：分解に数百年。でもリサイクル技術が確立されている」
```

### 生成ルール

- 1テーマにつき **7枚**（±1枚は許容）
- 4タイプが少なくとも1枚ずつ含まれること
- **配分の目安**: daily_impact×2, number×2, product×2, comparison×1
- 答え（back）は **3行以内**。長すぎると暗記できない
- 数値は「約〇〇」で。出典年は書かない
- id は `"{themeId}_card{連番}"` 形式（例: `"b1_card1"`）

---

## モード2：意見トレーニング

### フィールド別の書き方ルール

#### question（問いかけ）

gd-question-generator の question をそのまま使用する。

#### choices（選択肢）

gd-question-generator の choices をそのまま使用する（2〜4個）。

#### reason（理由）

- 「なぜその立場を選んだか」を論理的に2〜3文で
- 高校化学の知識を根拠にする
- 例：「水素は全元素で最も軽い気体で、常温では密度が極めて小さい。大量に運ぶには超高圧か超低温が必要であり、これは物質の本質的な性質に由来する」

#### example（具体例）

- **必ず数値を1つ以上含める**
- 製品名・企業名があるとなお良い
- 例：「液化には−253℃が必要。トヨタMIRAIの水素タンクは700気圧。水素ステーションは日本でまだ約160箇所しかない」

#### keyPhrase（キーフレーズ）

- GDで実際に口に出せる **1文のキメ台詞**
- 印象に残る言い回しにする
- 例：「物質の本質的な性質に由来する課題は、技術だけでは簡単に解決できません」
- 例：「作り方を間違えれば、水素社会はCO₂削減に逆行します」

#### counterArguments（反論と切り返し）

- 必ず **3セット**
- attack：他の選択肢を選んだ人からの自然な反論（1〜2文）
- defense：「たしかに〜ですが」の形で受け止めてから切り返す（2〜3文）
- 切り返しにも具体例や数値を入れる

### 生成ルール

- **全選択肢** の模範解答を用意する（choices が ["A", "B", "C"] なら A/B/C すべて）
- id は `"{themeId}_opinion"` 形式（例: `"b1_opinion"`）
- modelAnswers のキーは choices の文字列をそのまま使う

---

## モード3：軸発見トレーニング

### 4人の意見の作り方

- 必ず **A〜Dの4人**（speaker は `"Aさん"` `"Bさん"` `"Cさん"` `"Dさん"`）
- 意見はそれぞれ1〜2文。高校生が実際に言いそうな口調で
- 4人の意見が **きれいに2:2に分かれる軸が存在する** こと
- 安易に分かれすぎない（「賛成vs反対」のような単純すぎる軸は避ける）

### 模範軸（modelAxes）のルール

- 必ず **2つ以上** の有効な軸を用意する
- 1つ目が模範解答、2つ目以降が別解
- 軸の名前は **「〇〇 vs △△」** 形式で、高校生が理解できる言葉で
- 例：「すでに実績がある vs これから伸びる」「技術で解決できる vs お金で解決できる」
- **2つの軸は異なる2:2グループ分け** にすること（同じ分け方を繰り返さない）
- group1/group2 の値は `["A", "C"]` のようにスピーカーのアルファベット1文字

### 軸の整合性チェック（必ず実行する）

各軸について以下を確認する：

1. 軸ラベル（「〇〇 vs △△」）を読む
2. group1 の各スピーカーの意見が「〇〇」側に当てはまるか確認
3. group2 の各スピーカーの意見が「△△」側に当てはまるか確認
4. 2:2の分割が論理的に成立するか判定

### NG例

- 軸が抽象的すぎる：「良い vs 悪い」「重要 vs 重要でない」
- 4人全員が同じ方向を向いている（分けようがない）
- 1:3の分かれ方しかない（2:2が存在しない）
- 2つの軸が同じグループ分けになっている

### 生成ルール

- id は `"{themeId}_axis"` 形式（例: `"b1_axis"`）
- tag はグルーピング用の内部ラベル（UIには表示しない）

---

## ワークフロー

### Phase 0: テーマデータ読み込み

1. `~/claude-plugins/gd-question-generator/data/gd-themes.ts` を読み込み、対象テーマの情報（id, name, emoji, categoryId, year, question, choices）を取得
2. サンプルデータ `~/claude-plugins/gd-question-generator/data/samples/` から同カテゴリの既存ファイルを1つ読み、品質・温度感の基準を確認

### Phase 1: 基礎知識カード生成

- 7枚のカードを生成
- 4タイプ（daily_impact / number / product / comparison）が各1枚以上
- 配分目安: daily_impact×2, number×2, product×2, comparison×1

### Phase 2: 意見トレーニング生成

- question と choices は gd-themes.ts のデータをそのまま使用
- 全選択肢分の modelAnswers を生成
- 各 modelAnswers に counterArguments を3つずつ

### Phase 3: 軸発見トレーニング生成

- 4人の意見を生成
- modelAxes を2つ以上生成
- 軸の整合性チェックを実行

### Phase 4: 品質チェック

- [ ] 温度チェック：大学レベルの専門用語が混入していないか
- [ ] カードタイプ配分：4タイプ各1枚以上、計7枚
- [ ] 軸グループ整合性：各軸が論理的に2:2に分かれるか
- [ ] 2つの軸が異なるグループ分けになっているか
- [ ] year が gd-themes.ts の値と一致するか
- [ ] id の形式が正しいか

### Phase 5: TypeScript ファイル出力

結果を TypeScript 定数ファイルとして出力する。

---

## 出力形式

### ファイルパス

```
~/claude-plugins/gd-question-generator/data/samples/{カテゴリ番号}-{英語スラッグ}.ts
```

例: `b1-hydrogen-energy.ts`, `a2-metal-elements.ts`

### ファイル構造

```typescript
/**
 * サンプルデータ：{themeId} {テーマ名}
 *
 * gd-data-builder スキルが生成すべき出力の模範例。
 * 次の開発セッションで「これと同じ品質・温度感で他テーマも生成して」と指示する用。
 */

import type {
  GDTheme,
  KnowledgeCard,
  OpinionProblem,
  AxisProblem,
} from "../types";

// ---------------------------------------------------------------------------
// テーマ情報
// ---------------------------------------------------------------------------

export const theme: GDTheme = {
  id: "b1",
  name: "水素エネルギーの課題",
  emoji: "💧",
  categoryId: "energy",
  year: 2026,
};

// ---------------------------------------------------------------------------
// モード1：基礎知識カード（7枚）
// ---------------------------------------------------------------------------

export const knowledgeCards: KnowledgeCard[] = [
  // --- daily_impact × 2 ---
  { id: "b1_card1", themeId: "b1", front: "...", back: "...", cardType: "daily_impact" },
  // ... 計7枚
];

// ---------------------------------------------------------------------------
// モード2：意見トレーニング
// ---------------------------------------------------------------------------

export const opinionProblem: OpinionProblem = {
  id: "b1_opinion",
  themeId: "b1",
  question: "...",
  choices: ["...", "...", "..."],
  modelAnswers: {
    // 全選択肢分の模範解答
  },
};

// ---------------------------------------------------------------------------
// モード3：軸発見トレーニング
// ---------------------------------------------------------------------------

export const axisProblem: AxisProblem = {
  id: "b1_axis",
  themeId: "b1",
  opinions: [
    // Aさん〜Dさんの4人
  ],
  modelAxes: [
    // 2つ以上の軸
  ],
};
```

### コメント・セクション区切り

- ファイル先頭に JSDoc コメント（テーマ名＋用途説明）
- 各モードの間に `// ---` 区切り線とセクション名コメント
- カードタイプごとに `// --- {type} × {枚数} ---` コメント

---

## サンプルデータ（模範例）

以下のファイルが「期待される出力品質」の基準。生成時に必ず参照すること。

### 必ず参照するファイル

| ファイル | テーマ | 特徴 |
|---------|--------|------|
| `data/samples/b1-hydrogen-energy.ts` | 水素エネルギー | 三者択一型の模範例 |
| `data/samples/a1-element-depletion.ts` | 元素枯渇（2025出題済） | 枯渇型の模範例 |
| `data/samples/d1-math-vs-physics.ts` | 数学vs物理（2024出題済） | 二者択一型の模範例 |

### 全サンプル一覧

`~/claude-plugins/gd-question-generator/data/samples/` 配下に全31テーマ分のサンプルがある。
同カテゴリのサンプルを読んでから生成するとテーマ間の品質がそろう。

---

## 一括生成コマンド

「全テーマのデータを生成して」と言われたら：

1. `gd-themes.ts` の全テーマリストを読み込む
2. 既存サンプルの有無を確認（`data/samples/` を走査）
3. 未生成テーマを特定
4. 1テーマずつデータを生成（Phase 1〜5）
5. `data/samples/` 配下に各テーマの ts ファイルを出力

### 進捗報告

テーマ数が多い場合、カテゴリ単位で進捗を報告する：

```
✅ カテゴリA（元素・資源）: 5/5 テーマ完了
🔄 カテゴリB（エネルギー・電池）: 2/4 テーマ生成中...
⬜ カテゴリC（環境・リサイクル）: 未着手
```
